import os
import sys
root_path = os.path.dirname(os.path.abspath('../..'))
sys.path.append(root_path)

import unittest
os.environ["NOQT"] = "1"

from ...ml_tools.training_service import TrainingService


class TestTrainService(unittest.TestCase):
    def test_send_to_server(self):
        training_service = TrainingService()
        training_service.data_collected.append([1.0,0.0,0.0,0.0,0.0,0.0,0.64405988898939126,0.43286370429485993,0.44834133700421908,0.41235343308661099,0.3469668740008871,0.34371233289868103,0.40828497280713716,0.4433201085482209,0.48035387845879773,0.066284041578365288,0.12990745855314656,0.19961350351175433,0.087854278969364541,0.16832708601553587,0.090744482113904776,2.2580298568323398,1.1450696130708649,0.6864718099738798,0.67575605336230593,1.1724271550882008,0.91631425088687979,0.94012758527416695,0.95528917031228322,0.99649583828187149,0.24437468738163726,0.49015454368030925,0.7164206131660209,0.25163106922048367,0.48480930001938044,0.2364486647012729,0.7464669314954987,0.72442173433487289,0.66810782239963651,0.6118602906310936,0.60397581443122372,0.41130367963352743,0.46973571300486061,0.59517009120652165,0.69099427809895086,0.13137286499741244,0.31236898875482477,0.47306505686919675,0.18834839023541097,0.35004843543634201,0.17057448011294188,0.61028499254541457,0.53112407339347545,0.52499141422773477,0.48559522419255313,0.43034533525151747,0.19089377991199621,0.27466794249569498,0.36712991964429792,0.45962800062118125,0.084823496178930063,0.18801814936749536,0.29599126382154595,0.12299810525271543,0.23903738173316341,0.1249233550217851,135.55982142901712,139.50262155194054,131.90465423242128,125.40478667104867,12.971992068275361,23.508027478030119,39.35083759397299,12.376187409899156,27.610576334130037,15.954685199453094,61.11252422600495,75.356573820232953,78.65848363295575,73.211254090614261,73.766846437138824,0.12294904422014952,0.93345548212528229,-0.33599089831113815,35.116945266723633,1.0,0.36383325979113579,-0.072531899437308311,-0.32905722409486771,-0.94122043251991272,0.0,0.0,0.0,-4.0419702529907227,-6.6193227767944336,0.58221811056137085,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0])
        training_service.data_collected.append([2.0, 0.0, 1.0, 1.0, 1.0, 1.0, 0.46627554817302674, 0.85744565250106586, 0.93752985880762685, 0.8746084591266774, 0.71566392617878294, 0.50085845164877019, 0.54701675252210724, 0.51582757606284679, 0.44268413188753114, 0.14496133267242367, 0.20606081135966869, 0.3270463219657247, 0.088882106713338682, 0.25234676719827603, 0.16776063456414558, 2.5172472607918133, 1.2270423071265295, 0.75441110947209133, 0.85062125028608271, 1.4255068396759805, 0.90731731062084042, 0.93089669278612175, 0.94590944840063595, 0.98671156750313305, 0.24197524401362347, 0.48534185689818676, 0.7093863139138642, 0.24916038325572201, 0.48004909871678059, 0.23412703553620029, 0.61948113862623411, 0.8958129288444342, 0.91665553417827617, 0.83567578404619192, 0.77227262916839234, 0.61721557706791397, 0.7022333349176717, 0.70332936257952583, 0.70109272950722978, 0.1838931655772526, 0.31207295810352126, 0.47484265774296536, 0.14918961475991041, 0.33314940898687351, 0.18782281655631125, 0.45885892613027301, 0.86305025252818979, 0.93497243845348854, 0.86224202543274719, 0.70713316310768937, 0.53412267674463842, 0.6072168668548602, 0.58674445911670914, 0.53750459820341812, 0.16663336903227197, 0.25192171325762841, 0.39783286417718988, 0.11400814139269023, 0.30062720455458519, 0.19227378219242339, 28.516518965262193, 28.203070485192907, 32.866720021939621, 35.961544475443155, 1.001340173419357, 4.9983650380964475, 7.6732737836566862, 5.3989884498422231, 8.0336006267641196, 3.6109920676847316, 60.396481344366656, 77.707056210819545, 77.728500443492436, 79.164819216507141, 82.558531040543144, -0.09605751559138298, 0.83288426697254181, -0.54451471567153931, 74.976084232330322, 0.0, 0.0, -0.1919938288629055, -0.55220666527748108, -0.81061910837888718, 0.078779079020023346, -0.072908923029899597, 0.0066518355160951614, -1.4597626924514771, -16.380701065063477, 7.4873027801513672, 0.0, 0.0, 0.0, 1.1970999240875244, 0.0482330322265625, -2.362213134765625, 0.79615020751953125, 0.4944610595703125, -1.3910579681396484, 0.89247512817382812, 0.5481719970703125, -0.51563072204589844, 0.0225372314453125, -2.025482177734375, -2.0068244934082031])
        sent = training_service.send_to_server()
        assert sent is True